<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Wheeled Inverted Pendulum | Alex Boehm</title> <meta name="author" content="Alex Boehm"/> <meta name="description" content="Senior Design Project"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒ </text></svg>"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://alboehm.github.io/projects/wip_project/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">AlexÂ </span>Boehm</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Wheeled Inverted Pendulum</h1> <em class="post-time">Fall 2021 - Spring 2022</em> <p class="post-description">Senior Design Project</p> </header> <article> <h2 id="background">Background</h2> <p>Because I want to work on controls systems in graduate school and as a career, I decided to focus my senior design project around the subject, concentrating on areas in controls I have not yet had the opportunity to work with. There were no options available that fit this criterion, so I collaborated with my mechatronics professor to design one.</p> <h2 id="project-overview">Project Overview</h2> <p>A wheeled inverted pendulum (WIP) is a cart mounted with a pendulum that rotates freely at its base. The pendulum is balanced by a feedback control loop that commands the cartâ€™s movement based on the pendulumâ€™s position. WIPs serve as simplified models for balancing in higher dimensional systems, such as bipedal robots.</p> <div class="row"> <div class="col"> <center> <figure> <picture> <img src="/assets/img/wip_diagram_small.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Diagram of a WIP" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </center> </div> </div> <div class="caption"> Diagram of a WIP on an incline. Beta is the incline angle and theta is the pendulum angle. The feedback control system must estimate these angles and command the cart to balance the pendulum by aligning it parallel with gravity. </div> <p>When balancing on an incline, a WIP must be able to measure the angles of the pendulum and the incline. Typically, this is done with gyroscopes, but they are prone to drift and loss of accuracy over time. University of Alabama PhD student Cole Woods proposed a sensor configuration and error algorithm that uses strictly accelerometer feedback to provide a full description of the state of the system and achieve balancing. This sensor configuration addresses the instability of the gyroscopes and produces a more robust controls system.</p> <p>My teamâ€™s objective was to design and fabricate a WIP to validate balancing on variable inclines with the all-accelerometer sensing system and acceleration-based error algorithm. In my role as Controls Engineer, I focused on the implementation of the error algorithm, including angle estimation calculations, and writing the controls system software using a PID controller. I also served as the Team Lead and managed the other three team members.</p> <h2 id="angle-estimation-calculations">Angle Estimation Calculations</h2> <p>The WIP had to be able to estimate the angles of the incline and the pendulum to find the error of the pendulumâ€™s position using accelerometer readings and feedback from the motor mounted on the cart. The difficulty here laid in separating dynamic acceleration from gravitational acceleration, as they are combined in the readings from the accelerometers.</p> <p><strong>Pendulum Angle</strong></p> <p>To calculate the pendulum angle, the readings from the two accelerometers on the pendulum were used to determine the acceleration of the base of the pendulum (point O in the diagram above). This acceleration is the same magnitude as the acceleration measured by the accelerometer mounted to the cart, but the former is in the pendulumâ€™s coordinate system {b} and the latter is in the cartâ€™s coordinate system {i}. The angular difference between the acceleration vectors is the rotation angle between the coordinate systems, which is the angle of the pendulum.</p> <p>In the chart below, the upper plot shows the acceleration measured by the accelerometer mounted to the cart (orange lines) and the acceleration calculated at the pendulum base (blue lines). These are recordings from the actual system while the motor is not powered. The lower graph is the calculated angle (yellow line) based on the two acceleration readings. When the two acceleration readings are the same (when the solid lines intersect and the dotted lines intersect on the upper graph), the pendulum is normal to the cart, so itâ€™s angle is zero. This is demonstrated the graphs.</p> <p>A potentiometer mounted at the base of the pendulum also measured its angle (purple dotted line the lower graph) and served as validation for the angle calculation. The calculated and measured angles of the pendulum overlap, so the implemented angle calculation is accurate.</p> <p><strong>Incline Angle</strong></p> <p>For a cart that is not moving, the accelerometer on the cart only measures acceleration due to gravity. The angle of this vector is the angle of the incline. In order to measure the angle of the incline while the cart is moving, dynamic acceleration of the cart is estimated using motor feedback. This is subtracted from the x-direction of the accelerometer reading, and the angle of the gravity vector can be found using the resulting acceleration.</p> <p>This can be seen in the chart to the right by comparing the readings from the accelerometer mounted to the cart (orange lines on the top plot) with the calculated incline angle (green line on the bottom plot). The cart was not moving during this demonstration, so the incline angle is simply the angle of the gravity vector.</p> <div class="row"> <div class="col"> <center> <figure> <picture> <img src="/assets/img/wip_angles.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="WIP Angle Estimation Graphs" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </center> </div> </div> <div class="caption"> Accelerations and angle estimates experimentally recorded, motor not powered. Top plot shows the acceleration recorded by the accelerometer mounted to the cart (orange) and the acceleration estimated at the pendulum base (blue). The bottom plot shows the angles estimated by the accelerometer readings versus the angle of the pendulum recorded by the encoder. </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> <center>Â© Copyright 2023 Alex Boehm. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </center> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> </body> </html>